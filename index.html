<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earn Master</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 400px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }

        .app-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .online-help {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .help-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }

        /* Stats Section */
        .stats-section {
            padding: 25px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .stat-item:last-child {
            margin-bottom: 0;
        }

        .stat-label {
            font-size: 14px;
            color: #6c757d;
            font-weight: 500;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        /* Progress Section */
        .progress-section {
            padding: 25px 20px;
            text-align: center;
            background: white;
            border-bottom: 1px solid #e9ecef;
        }

        .progress-title {
            font-size: 16px;
            color: #6c757d;
            margin-bottom: 15px;
        }

        .progress-circle {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            position: relative;
        }

        .progress-bg {
            width: 100%;
            height: 100%;
            border: 8px solid #e9ecef;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 8px solid #00b894;
            border-radius: 50%;
            clip-path: inset(0 0 50% 0);
            transform: rotate(0deg);
            transition: transform 0.5s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        /* Buttons Section */
        .buttons-section {
            padding: 25px 20px;
            background: white;
        }

        .action-button {
            display: block;
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            text-align: center;
            text-decoration: none;
        }

        .action-button:last-child {
            margin-bottom: 0;
        }

        .watch-ad-btn {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
        }

        .watch-ad-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(0, 184, 148, 0.4);
        }

        .auto-ads-btn {
            background: linear-gradient(135deg, #0984e3 0%, #0767b1 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(9, 132, 227, 0.3);
        }

        .auto-ads-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(9, 132, 227, 0.4);
        }

        .stop-auto-btn {
            background: linear-gradient(135deg, #e17055 0%, #d63031 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(225, 112, 85, 0.3);
        }

        .stop-auto-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(225, 112, 85, 0.4);
        }

        .withdraw-btn {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(253, 203, 110, 0.3);
        }

        .withdraw-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(253, 203, 110, 0.4);
        }

        .telegram-btn {
            background: linear-gradient(135deg, #0088cc 0%, #006699 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(0, 136, 204, 0.3);
        }

        .telegram-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(0, 136, 204, 0.4);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #00b894;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .notification.show {
            opacity: 1;
        }

        /* Monetag Ad Container */
        .ad-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .ad-container.show {
            display: flex;
        }

        .ad-frame {
            width: 90%;
            height: 70%;
            border: none;
            border-radius: 15px;
            background: white;
        }

        .close-ad {
            margin-top: 20px;
            padding: 12px 30px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Button States */
        .button-disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .button-disabled:hover {
            transform: none !important;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Monetag Ad Container -->
    <div class="ad-container" id="adContainer">
        <iframe class="ad-frame" id="adFrame" src=""></iframe>
        <button class="close-ad" id="closeAd">Close Ad</button>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="help-badge">Online Help 360</div>
            <div class="app-title">Earn Master</div>
            <div class="online-help">Watch ads and earn points!</div>
        </div>

        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-item">
                <div class="stat-label">Watched Ads</div>
                <div class="stat-value" id="watchedAds">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Earned Points</div>
                <div class="stat-value" id="earnedPoints">0</div>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-title">Daily Progress</div>
            <div class="progress-circle">
                <div class="progress-bg">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
        </div>

        <!-- Buttons Section -->
        <div class="buttons-section">
            <button class="action-button watch-ad-btn" id="watchAdBtn">
                üì∫ Watch Ad
            </button>
            
            <button class="action-button auto-ads-btn" id="autoAdsBtn">
                üîÑ Auto Ads
            </button>
            
            <button class="action-button stop-auto-btn" id="stopAutoBtn" disabled>
                ‚èπÔ∏è Stop Auto
            </button>
            
            <button class="action-button withdraw-btn" id="withdrawBtn">
                üí∞ Withdraw
            </button>
            
            <a href="https://t.me/your_support_group" class="action-button telegram-btn" target="_blank">
                üì¢ Telegram Support Group
            </a>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            watchedAds: 0,
            earnedPoints: 0,
            dailyProgress: 0,
            maxDailyProgress: 100,
            isAutoAdsRunning: false,
            autoAdsInterval: null,
            pointsPerAd: 10,
            adsPerDay: 0,
            maxAdsPerDay: 50,
            // Ganti dengan link Monetag Anda di sini
            monetagLinks: [
                "https://monetag.com/your-link-1",
                "https://monetag.com/your-link-2", 
                "https://monetag.com/your-link-3",
                "https://monetag.com/your-link-4",
                "https://monetag.com/your-link-5"
            ]
        };

        // DOM Elements
        const watchedAdsEl = document.getElementById('watchedAds');
        const earnedPointsEl = document.getElementById('earnedPoints');
        const progressFillEl = document.getElementById('progressFill');
        const progressTextEl = document.getElementById('progressText');
        const watchAdBtn = document.getElementById('watchAdBtn');
        const autoAdsBtn = document.getElementById('autoAdsBtn');
        const stopAutoBtn = document.getElementById('stopAutoBtn');
        const withdrawBtn = document.getElementById('withdrawBtn');
        const notificationEl = document.getElementById('notification');
        const adContainer = document.getElementById('adContainer');
        const adFrame = document.getElementById('adFrame');
        const closeAd = document.getElementById('closeAd');

        // Initialize game
        function initGame() {
            updateUI();
            loadGameState();
        }

        // Watch Ad functionality dengan Monetag
        watchAdBtn.addEventListener('click', function() {
            if (gameState.adsPerDay >= gameState.maxAdsPerDay) {
                showNotification("Daily limit reached! Come back tomorrow.");
                return;
            }

            showMonetagAd().then((completed) => {
                if (completed) {
                    gameState.watchedAds++;
                    gameState.earnedPoints += gameState.pointsPerAd;
                    gameState.adsPerDay++;
                    updateDailyProgress();
                    updateUI();
                    showNotification(`+${gameState.pointsPerAd} points earned!`);
                }
            });
        });

        // Auto Ads functionality dengan Monetag
        autoAdsBtn.addEventListener('click', function() {
            if (gameState.adsPerDay >= gameState.maxAdsPerDay) {
                showNotification("Daily limit reached! Come back tomorrow.");
                return;
            }

            startAutoAds();
        });

        // Stop Auto Ads functionality
        stopAutoBtn.addEventListener('click', function() {
            stopAutoAds();
        });

        // Withdraw functionality
        withdrawBtn.addEventListener('click', function() {
            if (gameState.earnedPoints < 100) {
                showNotification(`Need 100 points to withdraw. You have ${gameState.earnedPoints} points.`);
                return;
            }

            showNotification("Redirecting to withdrawal page...");
            // Simulate withdrawal process
            setTimeout(() => {
                showNotification("Withdrawal request submitted!");
            }, 1500);
        });

        // Close ad functionality
        closeAd.addEventListener('click', function() {
            adContainer.classList.remove('show');
        });

        // Show Monetag ad
        function showMonetagAd() {
            return new Promise((resolve) => {
                // Pilih link Monetag secara random
                const randomLink = gameState.monetagLinks[Math.floor(Math.random() * gameState.monetagLinks.length)];
                
                // Set iframe source ke link Monetag
                adFrame.src = randomLink;
                
                // Tampilkan container ad
                adContainer.classList.add('show');
                
                // Simulasikan user menonton ad selama 30 detik
                let adTime = 30;
                const timerInterval = setInterval(() => {
                    adTime--;
                    
                    if (adTime <= 0) {
                        clearInterval(timerInterval);
                        adContainer.classList.remove('show');
                        resolve(true); // Ad completed successfully
                    }
                }, 1000);

                // Jika user menutup ad manual
                const closeHandler = function() {
                    clearInterval(timerInterval);
                    resolve(false); // Ad not completed
                };

                closeAd.addEventListener('click', closeHandler);
            });
        }

        // Start auto ads dengan Monetag
        function startAutoAds() {
            if (gameState.isAutoAdsRunning) return;

            gameState.isAutoAdsRunning = true;
            autoAdsBtn.disabled = true;
            autoAdsBtn.classList.add('button-disabled');
            stopAutoBtn.disabled = false;
            stopAutoBtn.classList.remove('button-disabled');

            showNotification("Auto Ads started! Opening Monetag ads...");

            let autoAdsTime = 300; // 5 minutes for auto ads session
            let currentAdIndex = 0;

            function runAutoAd() {
                if (gameState.adsPerDay >= gameState.maxAdsPerDay) {
                    stopAutoAds();
                    showNotification("Daily limit reached! Auto Ads stopped.");
                    return;
                }

                if (!gameState.isAutoAdsRunning) return;

                // Tampilkan Monetag ad
                showMonetagAd().then((completed) => {
                    if (completed) {
                        gameState.watchedAds++;
                        gameState.earnedPoints += gameState.pointsPerAd;
                        gameState.adsPerDay++;
                        updateDailyProgress();
                        updateUI();
                        showNotification(`Auto Ad: +${gameState.pointsPerAd} points!`);
                    }

                    // Lanjutkan ke ad berikutnya setelah delay
                    if (gameState.isAutoAdsRunning && autoAdsTime > 0) {
                        setTimeout(runAutoAd, 5000); // Delay 5 detik antara ads
                    }
                });

                autoAdsTime -= 35; // Kurangi waktu total (30s ad + 5s delay)
                currentAdIndex = (currentAdIndex + 1) % gameState.monetagLinks.length;
            }

            // Mulai ad pertama
            runAutoAd();

            // Auto stop setelah waktu habis
            setTimeout(() => {
                if (gameState.isAutoAdsRunning) {
                    stopAutoAds();
                    showNotification("Auto Ads session completed!");
                }
            }, autoAdsTime * 1000);
        }

        // Stop auto ads
        function stopAutoAds() {
            if (!gameState.isAutoAdsRunning) return;

            gameState.isAutoAdsRunning = false;
            autoAdsBtn.disabled = false;
            autoAdsBtn.classList.remove('button-disabled');
            stopAutoBtn.disabled = true;
            stopAutoBtn.classList.add('button-disabled');

            showNotification("Auto Ads stopped.");
        }

        // Update daily progress
        function updateDailyProgress() {
            gameState.dailyProgress = (gameState.adsPerDay / gameState.maxAdsPerDay) * 100;
            const rotation = (gameState.dailyProgress / 100) * 180;
            progressFillEl.style.transform = `rotate(${rotation}deg)`;
        }

        // Update UI
        function updateUI() {
            watchedAdsEl.textContent = gameState.watchedAds;
            earnedPointsEl.textContent = gameState.earnedPoints;
            progressTextEl.textContent = Math.round(gameState.dailyProgress) + '%';

            // Update button states based on daily limit
            if (gameState.adsPerDay >= gameState.maxAdsPerDay) {
                watchAdBtn.disabled = true;
                autoAdsBtn.disabled = true;
                watchAdBtn.classList.add('button-disabled');
                autoAdsBtn.classList.add('button-disabled');
                
                if (gameState.isAutoAdsRunning) {
                    stopAutoAds();
                }
            }
        }

        // Show notification
        function showNotification(message) {
            notificationEl.textContent = message;
            notificationEl.classList.add('show');
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, 3000);
        }

        // Save/Load game state
        function saveGameState() {
            const saveData = {
                watchedAds: gameState.watchedAds,
                earnedPoints: gameState.earnedPoints,
                adsPerDay: gameState.adsPerDay,
                dailyProgress: gameState.dailyProgress,
                lastPlayed: new Date().toDateString()
            };
            localStorage.setItem('earnMasterState', JSON.stringify(saveData));
        }

        function loadGameState() {
            const saved = localStorage.getItem('earnmasterState');
            if (saved) {
                const savedState = JSON.parse(saved);
                
                // Reset daily progress if it's a new day
                const today = new Date().toDateString();
                const lastPlayed = savedState.lastPlayed;
                
                if (lastPlayed !== today) {
                    gameState.adsPerDay = 0;
                    gameState.dailyProgress = 0;
                } else {
                    gameState.adsPerDay = savedState.adsPerDay || 0;
                    gameState.dailyProgress = savedState.dailyProgress || 0;
                }
                
                gameState.watchedAds = savedState.watchedAds || 0;
                gameState.earnedPoints = savedState.earnedPoints || 0;
                gameState.lastPlayed = today;
                
                updateDailyProgress();
                updateUI();
            }
        }

        // Ganti dengan link Monetag Anda yang sebenarnya
        function setupMonetagLinks() {
            // Contoh link Monetag - GANTI DENGAN LINK ANDA SENDIRI
            gameState.monetagLinks = [
                "https://otieu.com/4/9659425",
                "https://otieu.com/4/9641212",
                "https://otieu.com/4/9663909"
            ];
            
            console.log("Monetag links setup completed. Please replace with your actual Monetag links.");
        }

        // Auto-save game state
        setInterval(saveGameState, 30000);
        window.addEventListener('beforeunload', saveGameState);

        // Initialize the game
        initGame();
        setupMonetagLinks();
    </script>
</body>
</html>
